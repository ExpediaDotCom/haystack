
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Traces View Â· Haystack Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-forkmegithub/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="trends.html" />
    
    
    <link rel="prev" href="ui.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../getting_started.html">
            
                <a href="../getting_started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../architecture.html">
            
                <a href="../architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../subsystems/subsystems.html">
            
                <a href="../subsystems/subsystems.html">
            
                    
                    Subsystems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../subsystems/traces.html">
            
                <a href="../subsystems/traces.html">
            
                    
                    Traces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../subsystems/trends.html">
            
                <a href="../subsystems/trends.html">
            
                    
                    Trends
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../subsystems/collectors.html">
            
                <a href="../subsystems/collectors.html">
            
                    
                    Collectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../subsystems/pipes.html">
            
                <a href="../subsystems/pipes.html">
            
                    
                    Pipes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../subsystems/dependencies.html">
            
                <a href="../subsystems/dependencies.html">
            
                    
                    Dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../subsystems/anomaly_detection.html">
            
                <a href="../subsystems/anomaly_detection.html">
            
                    
                    Anomaly Detection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="ui.html">
            
                <a href="ui.html">
            
                    
                    UI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.5.1" data-path="traces.html">
            
                <a href="traces.html">
            
                    
                    Traces View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="trends.html">
            
                <a href="trends.html">
            
                    
                    Trends View
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="alerts.html">
            
                <a href="alerts.html">
            
                    
                    Alerts View
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../clients.html">
            
                <a href="../clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../deployment/deployment.html">
            
                <a href="../deployment/deployment.html">
            
                    
                    Deployment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../deployment/sub_systems.html">
            
                <a href="../deployment/sub_systems.html">
            
                    
                    Subsystems
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../deployment/clients.html">
            
                <a href="../deployment/clients.html">
            
                    
                    Clients
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../contributing.html">
            
                <a href="../contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Traces View</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="traces">Traces</h1>
<p>Visualization for tracing sub-system of Haystack.</p>
<h2 id="search">Search</h2>
<p>User can search for Traces going through a service. Operation can be &apos;all&apos; or any specific operation from the given service. Time Picker allows presets and time range. 
Here are the available search options -</p>
<ul>
<li><strong>Service</strong>: Service through which trace must go through</li>
<li><strong>Operation</strong>: Operation of the given service through which trace must go through</li>
<li><strong>Tags</strong>: User can specify white space separated list of tags in <code>key=value</code> format(eg. <code>success=false</code>), it will fetch Traces who have all the specified tags for provided service and operation combination. Please note that <em>only the tags whitelisted in haystack tracing subsystem will be eligible for search</em>, others will be ignored. Some special case for Tags search -<ul>
<li>In case of <code>traceId</code> tag search, haystack will search for the given id across all services and ignore the provided service </li>
<li>You can provide <code>minDuration=&lt;x_milliseconds&gt;</code> for searching for traces who took &gt; x_milliseconds in total.</li>
</ul>
</li>
<li><strong>Time Range Picker</strong>: User can select any presets or specify a custom time window.</li>
</ul>
<h3 id="search-results">Search Results</h3>
<p>Trace search results are presented in tabluar format for easy visualization of the data. All the columns are sortable.</p>
<p><img src="../images/traces.png" style="width: 800px;"></p>
<p>Here are details about how each column in search results is calculated -</p>
<ul>
<li><strong>Start Time</strong> - Start time of the first span in local timezone.</li>
<li><strong>Root</strong> - Operation name of the root span, root span(aka. loopback span) is the first span where user request started. Second line provides the URL(from span.tags.url in trace).</li>
<li><strong>Success</strong> - Status of trace. Is marked failure if any spans in trace have success marked as false.</li>
<li><strong>Spans</strong> - Total number of spans across all services in the trace. Second line shows upto top two services based on count in the trace.</li>
<li><strong>Op Duration</strong> - Total duration for the queried operation. Sum of duration of all spans of the queried operation.</li>
<li><strong>Op Duration %</strong> - Percentage of total duration for the queried operation as compared to duration of the trace. Could be &gt; 100% if there are parallel calls.</li>
<li><strong>Svc Duration</strong> - Total duration for the queried service. Sum of duration of all spans of the queried service</li>
<li><strong>Svc Duration %</strong> - Percentage of total duration for the queried service as compared to duration of the trace. Could be &gt; 100% if there are parallel calls.</li>
<li><strong>Total Duration</strong> - Duration of the span. It is the difference between the start time of earliest operation and the end time of last operation in the trace</li>
</ul>
<h2 id="trace-details">Trace Details</h2>
<h3 id="timeline">Timeline</h3>
<p>The timeline tab is the waterfall view for the trace. It shows span timelines using horizontal bars and parent child relationship between them using dotted lines.</p>
<p><img src="../images/trace_details.png" style="width: 800px;"></p>
<p>You can see more details about an individual span like Logs and Tags for that span and raw spans by clicking on the span. There is an option to view the raw trace, as well as creating a persistent, sharable link to the trace by clicking on <code>Share Trace</code>.</p>
<h3 id="latency-cost">Latency Cost</h3>
<p>The Latency Cost tab contains a visualization of the time it took for the trace&apos;s spans to move between data centers.</p>
<p><img src="../images/latency_cost.png" style="width: 800px;"> </p>
<ul>
<li>Edges represent network calls, edge value is network latency for the call, or average network latency if there were multiple calls between services</li>
<li>Red edges represent cross datacenter calls</li>
<li>Nodes represent a service (in a datacenter) calls</li>
<li>Network delta value are best estimates</li>
</ul>
<p>Please note that <code>enableLatencyCostViewer</code> must be marked as true in config to view this tab.</p>
<h3 id="trends">Trends</h3>
<p>The Trends tab of the Trace Details view provides a high level view of the trends for the operations that make up the trace. Selecting a trend from this list will take you to the trend view for that operation. </p>
<div class="gitbook-share"></div>


                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ui.html" class="navigation navigation-prev " aria-label="Previous page: UI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="trends.html" class="navigation navigation-next " aria-label="Next page: Trends View">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Traces View","level":"1.5.1","depth":2,"next":{"title":"Trends View","level":"1.5.2","depth":2,"path":"ui/trends.md","ref":"ui/trends.md","articles":[]},"previous":{"title":"UI","level":"1.5","depth":1,"path":"ui/ui.md","ref":"ui/ui.md","articles":[{"title":"Traces View","level":"1.5.1","depth":2,"path":"ui/traces.md","ref":"ui/traces.md","articles":[]},{"title":"Trends View","level":"1.5.2","depth":2,"path":"ui/trends.md","ref":"ui/trends.md","articles":[]},{"title":"Alerts View","level":"1.5.3","depth":2,"path":"ui/alerts.md","ref":"ui/alerts.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["share","edit-link","github","forkmegithub","disqus"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"haystack-2"},"github":{"url":"https://github.com/ExpediaDotCom/haystack"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/ExpediaDotCom/haystack/tree/master/docs"},"forkmegithub":{"color":"darkblue","url":"https://github.com/ExpediaDotCom/haystack"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"share":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Haystack Documentation","gitbook":"3.2.3"},"file":{"path":"ui/traces.md","mtime":"2018-03-27T11:47:14.442Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-03-27T11:48:11.878Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-share/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-forkmegithub/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

